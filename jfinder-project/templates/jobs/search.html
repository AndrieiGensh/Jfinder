{% extends "base.html" %}
{% load static %} 
{% load widget_tweaks %} 
{% block content %}

<div id="main-wrapper" class="main-wrapper">
    <div class="search-container">
        <p class="font-primary text-black text-sm text-center">Search</p>
        <input
            type="text"
            form="filtered-form"
            class="h-8 border-secondary border-[1px] text-left pl-5 rounded-[5px] focus:border-primary focus:ring-0 focus:outline-none min-w-[5rem] w-1/4"
            placeholder="Search..."
            name="search_keyword"
        />
        <input
            type="submit"
            value="Search"
            form="filtered-form"
            class="h-7 bg-primary font-secondary border-primary border-2 text-sm text-white text-center rounded-2xl shadow-md transition-all duration-400 hover:scale-102 hover:ease-in-out min-w-[80px]"
        />
        <p class="font-primary text-black text-sm text-center">Country:</p>
        <select name="job-location-country" id="" form="filtered-form">
            <option value="a">Poland</option>
            <option value="a">Brazil</option>
            <option value="a">Ukraine</option>
            <option value="a">Russia</option>
            <option value="a">Spain</option>
        </select>
        <p class="font-primary text-black text-sm text-center">City:</p>
        <select name="job-location-city" id="" form="filtered-form">
            <option value="a">City 1</option>
            <option value="a">City 2</option>
            <option value="a">City 3</option>
            <option value="a">City 4</option>
            <option value="a">City 5</option>
        </select>
    </div>
    <div id="sidebar-container" class="sidebar-container">
        <aside class="sidebar-filters shrink-0 font-secondary">
            <div
                id="filters-controls"
                class="w-full shrink-0 sticky top-0 flex flex-col gap-2 justify-center bg-white px-[5px] py-[10px]"
            >
                <p class="text-center font-primary text-[16px]">Filters</p>
                <div class="w-full flex flex-row gap-2 justify-around">
                    <input
                        type="button"
                        value="Apply All"
                        class="bg-primary font-secondary text-white text-sm text-center h-7 w-[7rem] rounded-2xl"
                    />
                    <input
                        type="submit"
                        form="filtered-form"
                        value="Apply All"
                        class="bg-white border-1 border-secondary font-secondary text-secondary text-sm text-center h-7 w-[7rem] rounded-2xl"
                    />
                </div>
            </div>
            <div id="filters-container" class="w-full shrink-0">
                <div
                    class="bg-white flex flex-row justify-around items-center w-full h-8 border-primary border-1"
                    _="on click if event's target is me toggle .show on next <div/>"
                >
                    <p>Tags</p>
                    <input
                        type="text"
                        name=""
                        id=""
                        placeholder="Search"
                        class="w-1/2 h-6 text-center border-1 border-black"
                        _="on keyup if the event's key is 'Escape'
                            set my value to ''
                            trigger keyup
                            else show <div/> in #filter-list-wrapper when its textContent.toLowerCase() contains my value.toLowerCase()"
                    />
                </div>
                <div id="filter-list-wrapper" class="hidden w-full">
                    <form hx-get="{% url "search" %}" hx-params="*" hx-push-url="true" hx-target="#offers-list" hx-swap="innerHTML" id="filtered-form" 
                    class="w-full flex flex-wrap gap-3 py-4 max-h-[10rem] overflow-x-auto">
                        {% csrf_token %}
                        {% for tag in tag_list%}
                            <div 
                                class="min-h-5 px-[1rem] py-[0.1rem] text-center rounded-2xl bg-gray-300 cursor-pointer font-secondary {% if tag.selected %}{{'mimic-checkbox-checked'}}{% endif %}"
                                _="on click if event's target is me toggle [@checked] on (<input/> in me) then toggle .mimic-checkbox-checked on me"
                            >
                                {{tag.data.title}}
                                <input type="checkbox" name="tags" value="{{tag.data.slug}}" {% if tag.selected %}checked{% endif %} hidden>
                            </div>
                        {% endfor %}
                    </form>
                </div>
                <div
                    class="bg-white flex flex-row justify-around items-center w-full h-8 border-primary border-1"
                    _="on click toggle .show on next <div/>"
                >
                    <p>Entry level</p>
                </div>
                <div class="hidden w-full h-full">
                    {% include "jobs/components/nothing_here_list.html" %}
                </div>
                <div
                    class="bg-white flex flex-row justify-around items-center w-full h-8 border-primary border-1"
                >
                    <p>Salary</p>
                </div>
                <div
                    class="bg-white flex flex-row justify-around items-center w-full h-8 border-primary border-1"
                >
                    <p>Benefits</p>
                </div>
            </div>
        </aside>

        <aside id="job-details" class="side-details gap-5 pb-[1rem]">
            {% include "jobs/components/job_details_initial.html" %}
        </aside>
    </div>
    <main id="offers-list" class="main-content">
        {% include "jobs/components/job_list.html" %}
    </main>
</div>

{% endblock content %}
