{% extends "base.html" %}
{% load static %} 
{% load widget_tweaks %} 
{% block content %}

<div id="main-wrapper" class="main-wrapper">
    <div class="search-container">
        <p class="font-primary text-black text-sm text-center">Search</p>
        <input
            type="text"
            form="filtered-form"
            class="h-8 border-secondary border-[1px] text-left pl-5 rounded-[5px] focus:border-primary focus:ring-0 focus:outline-none min-w-[5rem] w-1/4"
            placeholder="Search..."
            name="job-keywords"
        />
        <input
            type="submit"
            value="Search"
            form="filtered-form"
            class="h-7 bg-primary font-secondary border-primary border-2 text-sm text-white text-center rounded-2xl shadow-md transition-all duration-400 hover:scale-102 hover:ease-in-out min-w-[80px]"
        />
        <p class="font-primary text-black text-sm text-center">Country:</p>
        <select name="job-location-country" id="" form="filtered-form">
            <option value="a">Poland</option>
            <option value="a">Brazil</option>
            <option value="a">Ukraine</option>
            <option value="a">Russia</option>
            <option value="a">Spain</option>
        </select>
        <p class="font-primary text-black text-sm text-center">City:</p>
        <select name="job-location-city" id="" form="filtered-form">
            <option value="a">City 1</option>
            <option value="a">City 2</option>
            <option value="a">City 3</option>
            <option value="a">City 4</option>
            <option value="a">City 5</option>
        </select>
    </div>
    <div id="sidebar-container" class="sidebar-container">
        <aside class="sidebar-filters shrink-0">
            <div
                id="filters-controls"
                class="w-full shrink-0 sticky top-0 flex flex-col gap-2 justify-center bg-white px-[5px] py-[10px]"
            >
                <p class="text-center font-primary text-[16px]">Filters</p>
                <div class="w-full flex flex-row gap-2 justify-around">
                    <input
                        type="button"
                        value="Apply All"
                        class="bg-primary font-secondary text-white text-sm text-center h-7 w-[7rem] rounded-2xl"
                    />
                    <input
                        type="submit"
                        form="filtered-form"
                        value="Apply All"
                        class="bg-white border-1 border-secondary font-secondary text-secondary text-sm text-center h-7 w-[7rem] rounded-2xl"
                    />
                </div>
            </div>
            <div id="filters-container" class="w-full shrink-0">
                <div
                    class="bg-white flex flex-row justify-around items-center w-full h-8 border-primary border-1"
                    _="on click if event's target is me toggle .show on next <div/>"
                >
                    <p>Tags</p>
                    <input
                        type="text"
                        name=""
                        id=""
                        placeholder="Search"
                        class="w-1/2 h-6 text-center border-1 border-black"
                        _="on keyup if the event's key is 'Escape'
                            set my value to ''
                            trigger keyup
                            else show <div/> in #filter-list when its textContent.toLowerCase() contains my value.toLowerCase()"
                    />
                </div>
                <div id="filter-list-wrapper" class="hidden w-full">
                    <form method="post" id="filtered-form" action="{% url "search" %}" class="w-full flex flex-wrap gap-3 py-4 max-h-[10rem] overflow-x-auto">
                        {% csrf_token %}
                        {% for tag in tags_list%}
                            <div 
                                class="min-h-5 px-[1rem] py-[0.1rem] text-center rounded-2xl bg-gray-300 cursor-pointer"
                                _="on click if event's target is me toggle [@checked] on (<input/> in me) then toggle .mimic-checkbox-checked on me"
                            >
                                {{tag.name}}
                                <input type="checkbox" name="tags" id="{{tag.id}}" value="{{tag.id}}" hidden>
                            </div>
                        {% endfor %}
                    </form>
                    {% comment %} 
                    <div id="filter-list" class="w-full flex flex-wrap gap-3 py-4 max-h-[10rem] overflow-x-auto">
                        <p class="w-[10rem] h-5 rounded-2xl bg-gray-300">
                            Django programming
                        </p>
                        <p class="w-[4rem] h-5 rounded-2xl bg-gray-300 text-center text-ellipsis overflow-hidden whitespace-nowrap">
                            Python overflow programming
                        </p>
                        <p class="w-[6rem] h-5 rounded-2xl bg-gray-300">
                            Programming
                        </p>
                        <div class="w-[3rem] h-5 rounded-2xl bg-gray-300">
                            Vue
                        </div>
                        <div class="w-[6rem] h-5 rounded-2xl bg-gray-300">
                            Vue.js
                        </div>
                        <div class="w-[3rem] h-5 rounded-2xl bg-gray-300">
                            React
                        </div>
                        <div class="w-[5rem] h-5 rounded-2xl bg-gray-300">
                            Webdev
                        </div>
                        <div class="w-[7rem] h-5 rounded-2xl bg-gray-300">
                            Server prog
                        </div>
                    </div> 
                    {% endcomment %}
                </div>
                <div
                    class="bg-white flex flex-row justify-around items-center w-full h-8 border-primary border-1"
                    _="on click toggle .show on next <div/>"
                >
                    <p>Entry level</p>
                </div>
                <div class="hidden w-full h-full">
                    {% include "jobs/components/nothing_here_list.html" %}
                </div>
                <div
                    class="bg-white flex flex-row justify-around items-center w-full h-8 border-primary border-1"
                >
                    <p>Salary</p>
                </div>
                <div
                    class="bg-white flex flex-row justify-around items-center w-full h-8 border-primary border-1"
                >
                    <p>Benefits</p>
                </div>
            </div>
        </aside>

        <aside id="job-details" class="side-details gap-5 pb-[1rem]">
            {% include "jobs/components/job_details_initial.html" %}
        </aside>
    </div>
    <main class="main-content">
        {% for i in '0123456789'|make_list %}
        <div
            class="w-full max-h-[15rem] flex flex-col gap-1 overflow-clip border-primary border-1 p-[1rem]"
            hx-get="/jobs/job-details/{{i}}" hx-target="#job-details" hx-swap="innetHTML" hx-trigger="getJobDetails" _="on click trigger getJobDetails on me"
        >
            <div
                class="w-full flex flex-row justify-around place-items-center gap-3"
            >
                <div class="w-[4rem] h-[4rem] bg-gray-300"></div>
                <div class="flex flex-col">
                    <p>Long job title goes here for the testing</p>
                    <div
                        class="w-full h-[2rem] flex flex-row gap-4 items-center"
                    >
                        <p class="text-center">Text bla</p>
                        <p>Text bla</p>
                        <p>Text bla</p>
                    </div>
                    <div
                        class="w-full h-[2rem] flex flex-wrap gap-3 items-center"
                    >
                        <div class="w-[4rem] h-5 rounded-2xl bg-gray-300"></div>
                        <div class="w-[6rem] h-5 rounded-2xl bg-gray-300"></div>
                        <div class="w-[3rem] h-5 rounded-2xl bg-gray-300"></div>
                        <div class="w-[6rem] h-5 rounded-2xl bg-gray-300"></div>
                        <div class="w-[3rem] h-5 rounded-2xl bg-gray-300"></div>
                    </div>
                </div>
            </div>
            <div class="">
                <p>
                    Position description goes here. Only minimalistic necessary
                    details, something to catch the eye of the potential
                    employee. Short, concise. The full information is available
                    in a sep. view.
                </p>
            </div>
        </div>
        {% endfor %}
    </main>
</div>

{% endblock content %}
